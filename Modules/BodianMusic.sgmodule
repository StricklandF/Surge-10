#!name=æ³¢ç‚¹éŸ³ä¹
#!desc=è§£é”æ³¢ç‚¹éŸ³ä¹ä¼šå‘˜ï¼Œç§»é™¤å¼€å±å¹¿å‘Šã€æ¨ªå¹…æ¨å¹¿ã€æ‚¬æµ®å¹¿å‘Šä»¥åŠå•†åŸTabï¼Œå»ºè®®å¸è½½é‡è£…ä½¿ç”¨ã€‚
#!author=ä¼Ÿäºº[https://github.com/WeiGiegie],å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md],ZenmoFeiShi[https://github.com/ZenmoFeiShi],wish[https://github.com/mist-whisper]
#!category=è§£é”å»å¹¿å‘Š
#!date=2025-08-30 22:33:00

[Map Local]
# ç§»é™¤å¼€å±å¹¿å‘Š
^https://ad\.tencentmusic\.com/config/uni data-type=text data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/bd-api\.kuwo\.cn\/api\/(play|service|advert)\/advert\/ data-type=text data="{}" status-code=200 header="Content-Type:application/json"

# ç§»é™¤æ‚¬æµ®å¹¿å‘Š
^https:\/\/bd-api\.kuwo\.cn\/api\/popup\/ data-type=text data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/bd-api\.kuwo\.cn\/api\/pay\/vip\/invitation\/assist\/popup\? data-type=text data="{}" status-code=200 header="Content-Type:application/json"

# ç§»é™¤æ¨ªå¹…æ¨å¹¿
^https:\/\/bd-api\.kuwo\.cn\/api\/service\/banner\/ data-type=text data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/bd-api\.kuwo\.cn\/api\/service\/home\/module\?.*&moduleId=6 data-type=text data="{}" status-code=200 header="Content-Type:application/json"

# ç§»é™¤ä¼šå‘˜è§’æ ‡
^https:\/\/bd-api\.kuwo\.cn\/api\/pay\/vip\/lowPriceText\? data-type=text data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/bd-api\.kuwo\.cn\/api\/service\/global\/config\/vipEnter\? data-type=text data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/bd-api\.kuwo\.cn\/api\/ucenter\/vip\/give\/config\? data-type=text data="{}" status-code=200 header="Content-Type:application/json"

# ç§»é™¤æœç´¢æ¡†çƒ­è¯
^https:\/\/bd-api\.kuwo\.cn\/api\/search\/topic\/word data-type=text data="{}" status-code=200 header="Content-Type:application/json"


[Body Rewrite]
# ç§»é™¤ä¸»é¡µå•†åŸtab
response-body-json-jq ^https:\/\/bd-api\.kuwo\.cn\/api\/service\/global\/config\/scene '.data.showShopEntry=false|.data.idolTabShow=true'

# ç²¾ç®€ä¸»é¡µ
response-body-json-jq ^https:\/\/bd-api\.kuwo\.cn\/api\/service\/home\/index '.data.moduleList |= map(select(.type != 8 and .type != 5 and .type != 1 and .type != 9 and .type != 6 and .type != 4))'

# ç§»é™¤å¬ç‚¹å„¿ä¸ä¸€æ ·çš„
response-body-json-jq ^https:\/\/bd-api\.kuwo\.cn\/api\/service\/resource\/recommend\? '.data.resourceList[] |= del(.resource)'


[Script]
æ³¢ç‚¹éŸ³ä¹ = type=http-response, pattern=^https?:\/\/bd-api\.kuwo\.cn\/api\/(ucenter\/users\/pub|play\/music\/v2\/(audioUrl|checkRight)|service\/home\/module|pay\/vip\/lowPriceText), script-path=https://raw.githubusercontent.com/mist-whisper/Script/master/BodianMusic/BodianMusic.js, requires-body=true, timeout=60

[MITM]
hostname = %APPEND% bd-api.kuwo.cn, *.kuwo.*, h5app.kuwo.cn, bodianimgcdn.kuwo.cn, ad.tencentmusic.com